{"mappings":"khBACA,IAAMA,EAAW,CACbC,UAAWC,SAASC,cAAc,YAClCC,MAAMF,SAASC,cAAc,oBAI3BE,EAAiB,WACjBC,EAAWC,KAAKC,MAAMC,aAAaC,QAAQL,KAAoB,GAYrE,SAASM,EAAaC,GAClB,OAAOA,EAAIC,KAAI,SAAAC,G,IAAGC,EAAGD,EAAHC,IAAKC,EAASF,EAATE,UAAUC,EAAKH,EAALG,MAAOC,EAAMJ,EAANI,OAAQC,EAAWL,EAAXK,YAAYC,EAAUN,EAAVM,WAAYC,EAASP,EAATO,U,MAAe,wBAGtDC,OADlBP,EAAI,sGACkCO,OAApBF,EAAW,WAEfE,OAFwBL,EAAM,0EAG5BK,OADFL,EAAM,4CAEDK,OADHN,EAAU,8CAQZM,OAPKH,EAAY,8QAS/BG,OAFcJ,EAAO,kEAGgCI,OADrDD,EAAU,GAAGE,IAAI,uJAGjBD,OAFqDD,EAAU,GAAGG,KAAK,+CAGxBF,OAD/CD,EAAU,GAAGE,IAAI,6IAGjBD,OAF+CD,EAAU,GAAGG,KAAK,0CAGbF,OADpDD,EAAU,GAAGE,IAAI,kJACqDD,OAAlBD,EAAU,GAAGG,KAAK,yF,IAM/EC,KAAK,G,CAvCZnB,EAASoB,OAAO,IACf1B,EAASI,MAAMuB,UAAY,IAG/B3B,EAASC,UAAU2B,mBAAmB,YAAajB,EAAaL,IAyChE,IAFA,IAAMuB,EAAQ3B,SAAS4B,iBAAiB,aAE/BC,EAAI,EAAGA,EAAIF,EAAMH,OAAQK,IAC7BF,EAAME,GAAGC,iBAAiB,QAASC,GAMxC,SAASA,EAAmBC,GAI3B,GAHMA,EAAIC,iBAGLD,EAAIE,OAAOC,UAAUC,SAAS,YAAnC,C,IAIoBC,EAAXC,EAA2D,QAAhDD,EAAAhC,KAAKC,MAAMC,aAAaC,QAAQL,WAAgB,IAAhDkC,IAAoD,GAI/DE,EAFUP,EAAIE,OAAOM,QAAQ,eAETC,QAAQC,GAE5BC,EAAML,EAASM,WAAU,SAAAC,G,OAAUA,EAAOhC,MAAQ0B,C,IAEjCD,EAASQ,MAAK,SAAAlC,G,OAAMA,EAAHC,MAAkB0B,C,IAE9CD,EAASS,MAAK,SAAAnC,G,OAAMA,EAAHC,MAAkB0B,C,IAE/BD,EAASU,OAAOL,EAAM,GAMtC,OAJApC,aAAa0C,QAAQ9C,EAAgBE,KAAK6C,UAAUZ,IAEpDa,OAAOC,SAASC,KAAO,uBAEhB5C,EAAa6B,EArBhB,C","sources":["src/js/shopping-list.js"],"sourcesContent":["\nconst elements = {\n    container: document.querySelector('.js-list'),\n    empty:document.querySelector('.shopping-empty')\n    \n}\n\nconst PRODUCT_LS_KEY = 'checkout';\nconst products = JSON.parse(localStorage.getItem(PRODUCT_LS_KEY)) || [];\n\n\nif(products.length>0){\n    elements.empty.innerHTML = \"\"\n}\n\nelements.container.insertAdjacentHTML('beforeend', createMarkup(products));\n\n\n\n\nfunction createMarkup(arr) {\n    return arr.map(({ _id, list_name,title, author, description,book_image, buy_links}) => `\n\n    <li data-id=\"${_id}\" class=\"js-product shop-product trigger\" data-modal-open=\"\">\n        <img class=\"shop-img\" src=\"${book_image}\" alt=\"${title}\" />\n        <div class=\"book-info\">\n        <h2 class=\"shop-title\">${title}</h2>\n        <p class=\"shop-category\">${list_name}</p>\n        <p class=\"shop-description\">${description}</p>\n        <button class=\"js-clear shop-dlt-btn\" type=\"button\">\n        <svg class=\"js-clear icon-trash\">\n        <use href=\"./images/icons.svg#icon-trash\"></use>\n      </svg>\n        </button>\n        <div class=\"shop-wrap\">\n        <p class=\"shop-author\">${author}</p>  \n       <ul class =\"shop-link-list\">\n        <a href=\"${buy_links[0].url}\" target=\"_blank\" rel=\"noreferrer noopener\" class=\"img link shop-link-amz\">\n        <img class=\"img icon-shop-amz\" src=\"./images/amazon.png\" alt=\"${buy_links[0].name}\"  />     \n        </a>\n        <a href=\"${buy_links[1].url}\" target=\"_blank\" rel=\"noreferrer noopener\" class=\"img link shop-link\">\n       <img class=\"img icon-shop\" src=\"./images/apple.png\" alt=\"${buy_links[1].name}\" /> \n        </a>\n        <a href=\"${buy_links[3].url}\" target=\"_blank\" rel=\"noreferrer noopener\" class=\"img link shop-link\">\n        <img class=\"img icon-shop\" src=\"./images/bookshops.png\" alt=\"${buy_links[3].name}\"  /> \n        </a>\n        </ul>\n        </div>\n        \n        </div>\n  </li>`).join('')\n}\n\n                \nconst clear = document.querySelectorAll('.js-clear')\n\nfor (let i = 0; i < clear.length; i++) {\n     clear[i].addEventListener(\"click\", handlerClearBasket\n      \n     );\n }\n\n\nfunction handlerClearBasket(evt) {\n       evt.preventDefault();\n   \n\n if (!evt.target.classList.contains('js-clear')) {\n        return;\n    }\n\n    const products = JSON.parse(localStorage.getItem(PRODUCT_LS_KEY)) ?? [];\n \n    const product = evt.target.closest('.js-product');\n  \n    const productId = product.dataset.id;\n\n    const fidx= products.findIndex(option => option._id === productId);\n\n    const currentProduct = products.find(({ _id }) => _id === productId);\n    \n    const idx = products.some(({ _id }) => _id === productId);\n\n    const deleted = products.splice(fidx, 1);\n\n    localStorage.setItem(PRODUCT_LS_KEY, JSON.stringify(products))\n   \n    window.location.href = './shopping-list.html';\n\n    return createMarkup(products)\n  \n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"names":["$399cd7aec2522034$var$elements","container","document","querySelector","empty","$399cd7aec2522034$var$PRODUCT_LS_KEY","$399cd7aec2522034$var$products","JSON","parse","localStorage","getItem","$399cd7aec2522034$var$createMarkup","arr","map","param","_id","list_name","title","author","description","book_image","buy_links","concat","url","name","join","length","innerHTML","insertAdjacentHTML","$399cd7aec2522034$var$clear","querySelectorAll","$399cd7aec2522034$var$i","addEventListener","$399cd7aec2522034$var$handlerClearBasket","evt","preventDefault","target","classList","contains","ref","products1","productId","closest","dataset","id","fidx","findIndex","option","find","some","splice","setItem","stringify","window","location","href"],"version":3,"file":"shopping-list.90dcfa00.js.map"}