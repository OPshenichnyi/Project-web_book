const o={closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]"),container:document.querySelector(".js-modal-item"),book:document.querySelector(".trigger"),list:document.querySelector(".js-list")},e=JSON.parse(localStorage.getItem("checkout"))||[],a=document.querySelectorAll("[data-modal-open]");for(let o=0;o<a.length;o++)a[o].addEventListener("click",t);JSON.parse(localStorage.getItem("modal"));function t(a){if(a.target.classList.contains("img"))return;o.modal.classList.remove("is-hidden");const t=a.target.closest("[data-modal-open]").dataset.id,l=e.find((({_id:o})=>o===t));localStorage.setItem("modal",JSON.stringify(l));const n=JSON.parse(localStorage.getItem("modal"))??{};var s;o.container.insertAdjacentHTML("beforeend",`\n    <div data-id="${(s=n)._id}" class="js-modal-product modal-shop-product " data-modal-open="">\n        \n    <div class="mоdal-info-wrap">\n    <img class="modal-shop-img" src="${s.book_image}" alt="${s.title}" />\n        <div class="book-info">\n        <h2 class="modal-shop-title">${s.title}</h2>\n        <p class="modal-shop-author">${s.author}</p>\n        <p class="modal-shop-description">${s.description}</p>\n      \n       <ul class ="modal-shop-link-list">\n        <a href="${s.buy_links[0].url}" target="_blank" rel="noreferrer noopener" class="link modal-shop-link-amz">\n        <img class="img-modal modal-icon-shop-amz" src="./images/amazon.png" alt="${s.buy_links[0].name}"  />\n        </a>\n        <a href="${s.buy_links[1].url}" target="_blank" rel="noreferrer noopener" class="link modal-shop-link">\n       <img class="img-modal  modal-icon-shop" src="./images/apple.png" alt="${s.buy_links[1].name}" />\n        </a>\n        <a href="${s.buy_links[3].url}" target="_blank" rel="noreferrer noopener" class="link modal-shop-link-bsh">\n        <img class="img-modal  modal-icon-shop-bsh" src="./images/bookshops.png" alt="${s.buy_links[3].name}"  />\n        </a>\n        </ul>\n        </div>\n        </div>\n        <button class="js-modal-clear modal-dlt-btn" type="button">remove from the shopping list</button>\n        <p class="modal-shop-text">Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>\n        \n  </div>`)}o.closeModalBtn.addEventListener("click",(function(){o.modal.classList.add("is-hidden"),o.container.innerHTML="",localStorage.removeItem("modal")})),o.container.addEventListener("click",(function(o){if(!o.target.classList.contains("js-modal-clear"))return;const e=JSON.parse(localStorage.getItem("checkout"))??[],a=o.target.closest(".js-modal-product");console.log(a);const t=a.dataset.id,l=e.findIndex((o=>o._id===t));return e.find((({_id:o})=>o===t)),e.splice(l,1),localStorage.setItem("checkout",JSON.stringify(e)),window.location.href="./shopping-list.html",createMarkup(e)}));
//# sourceMappingURL=shopping-list.440ec407.js.map
