!function(){for(var o={closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]"),container:document.querySelector(".js-modal-item"),book:document.querySelector(".trigger"),list:document.querySelector(".js-list")},a="modal",e="checkout",t=JSON.parse(localStorage.getItem(e))||[],n=document.querySelectorAll("[data-modal-open]"),l=0;l<n.length;l++)n[l].addEventListener("click",s);JSON.parse(localStorage.getItem(a));function s(e){if(!e.target.classList.contains("img")){o.modal.classList.remove("is-hidden");var n,l=e.target.closest("[data-modal-open]").dataset.id,s=t.find((function(o){return o._id===l}));localStorage.setItem(a,JSON.stringify(s));var c,i=null!==(n=JSON.parse(localStorage.getItem(a)))&&void 0!==n?n:{};o.container.insertAdjacentHTML("beforeend",'\n    <div data-id="'.concat((c=i)._id,'" class="js-modal-product modal-shop-product " data-modal-open="">\n        \n    <div class="mоdal-info-wrap">\n    <img class="modal-shop-img" src="').concat(c.book_image,'" alt="').concat(c.title,'" />\n        <div class="book-info">\n        <h2 class="modal-shop-title">').concat(c.title,'</h2>\n        <p class="modal-shop-author">').concat(c.author,'</p>\n        <p class="modal-shop-description">').concat(c.description,'</p>\n      \n       <ul class ="modal-shop-link-list">\n        <a href="').concat(c.buy_links[0].url,'" target="_blank" rel="noreferrer noopener" class="link modal-shop-link-amz">\n        <img class="img-modal modal-icon-shop-amz" src="./images/amazon.png" alt="').concat(c.buy_links[0].name,'"  />\n        </a>\n        <a href="').concat(c.buy_links[1].url,'" target="_blank" rel="noreferrer noopener" class="link modal-shop-link">\n       <img class="img-modal  modal-icon-shop" src="./images/apple.png" alt="').concat(c.buy_links[1].name,'" />\n        </a>\n        <a href="').concat(c.buy_links[3].url,'" target="_blank" rel="noreferrer noopener" class="link modal-shop-link-bsh">\n        <img class="img-modal  modal-icon-shop-bsh" src="./images/bookshops.png" alt="').concat(c.buy_links[3].name,'"  />\n        </a>\n        </ul>\n        </div>\n        </div>\n        <button class="js-modal-clear modal-dlt-btn" type="button">remove from the shopping list</button>\n        <p class="modal-shop-text">Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>\n        \n  </div>'))}}o.closeModalBtn.addEventListener("click",(function(){o.modal.classList.add("is-hidden"),o.container.innerHTML="",localStorage.removeItem("modal")})),o.container.addEventListener("click",(function(o){if(o.target.classList.contains("js-modal-clear")){var a,t=null!==(a=JSON.parse(localStorage.getItem(e)))&&void 0!==a?a:[],n=o.target.closest(".js-modal-product");console.log(n);var l=n.dataset.id,s=t.findIndex((function(o){return o._id===l}));t.find((function(o){return o._id===l})),t.splice(s,1);return localStorage.setItem(e,JSON.stringify(t)),window.location.href="./shopping-list.html",createMarkup(t)}}))}();
//# sourceMappingURL=shopping-list.0dc61ded.js.map
