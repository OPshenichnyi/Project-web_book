{"mappings":"sgBAAA,MAAMA,EAAW,CACbC,UAAWC,SAASC,cAAc,YAClCC,MAAMF,SAASC,cAAc,oBAI3BE,EAAiB,WACjBC,EAAWC,KAAKC,MAAMC,aAAaC,QAAQL,KAAoB,GASrE,SAASM,EAAaC,GAClB,OAAOA,EAAIC,KAAI,EAACC,IAAEA,EAAGC,UAAEA,EAASC,MAACA,EAAKC,OAAEA,EAAMC,YAAEA,EAAWC,WAACA,EAAUC,UAAEA,KAAe,wBAExEN,2EACkBK,WAAoBH,0EAExBA,4CACED,8CACGG,qQAOLD,kEAEdG,EAAU,GAAGC,iJACoCD,EAAU,GAAGE,kDAE9DF,EAAU,GAAGC,uIAC8BD,EAAU,GAAGE,6CAExDF,EAAU,GAAGC,4IACmCD,EAAU,GAAGE,+FAMtEC,KAAK,G,CApCZjB,EAASkB,OAAO,IACfxB,EAASI,MAAMqB,UAAY,IAG/BzB,EAASC,UAAUyB,mBAAmB,YAAaf,EAAaL,IAqChE,MAAMqB,EAAQzB,SAAS0B,iBAAiB,aACxCC,QAAQC,IAAIH,GAEZ,IAAK,IAAII,EAAI,EAAGA,EAAIJ,EAAMH,OAAQO,IAC7BJ,EAAMI,GAAGC,iBAAiB,QAASC,GAMxC,SAASA,EAAmBC,GAI3B,GAHMA,EAAIC,kBAGLD,EAAIE,OAAOC,UAAUC,SAAS,YAC5B,O,IAGaC,EAAjB,MAAMC,EAA2D,QAAhDD,EAAAhC,KAAKC,MAAMC,aAAaC,QAAQL,WAAgB,IAAhDkC,IAAoD,GAI/DE,EAFUP,EAAIE,OAAOM,QAAQ,eAETC,QAAQC,GAE5BC,EAAML,EAASM,WAAUC,GAAUA,EAAOjC,MAAQ2B,IAEjCD,EAASQ,MAAK,EAAClC,IAAEA,KAAUA,IAAQ2B,IAE9CD,EAASS,MAAK,EAACnC,IAAEA,KAAUA,IAAQ2B,IAE/BD,EAASU,OAAOL,EAAM,GAMrC,OAJDpC,aAAa0C,QAAQ9C,EAAgBE,KAAK6C,UAAUZ,IAEpDa,OAAOC,SAASC,KAAO,uBAEf5C,EAAa6B,E","sources":["src/js/shopping-list.js"],"sourcesContent":["const elements = {\n    container: document.querySelector('.js-list'),\n    empty:document.querySelector('.shopping-empty')\n    \n}\n\nconst PRODUCT_LS_KEY = 'checkout';\nconst products = JSON.parse(localStorage.getItem(PRODUCT_LS_KEY)) || [];\n\n\nif(products.length>0){\n    elements.empty.innerHTML = \"\"\n}\n\nelements.container.insertAdjacentHTML('beforeend', createMarkup(products));\n\nfunction createMarkup(arr) {\n    return arr.map(({ _id, list_name,title, author, description,book_image, buy_links}) => `\n\n    <li data-id=\"${_id}\" class=\"js-product shop-product\">\n        <img class=\"shop-img\" src=\"${book_image}\" alt=\"${title}\" />\n        <div class=\"book-info\">\n        <h2 class=\"shop-title\">${title}</h2>\n        <p class=\"shop-category\">${list_name}</p>\n        <p class=\"shop-description\">${description}</p>\n        <button class=\"js-clear shop-dlt-btn\" type=\"button\">\n        <svg class=\"icon-trash\">\n        <use href=\"./images/icons.svg#icon-trash\"></use>\n      </svg>\n        </button>\n        <div class=\"shop-wrap\">\n        <p class=\"shop-author\">${author}</p>  \n       <ul class =\"shop-link-list\">\n        <a href=\"${buy_links[0].url}\" target=\"_blank\" rel=\"noreferrer noopener\" class=\"link shop-link-amz\">\n        <img class=\"icon-shop-amz\" src=\"./images/amazon.png\" alt=\"${buy_links[0].name}\"  />     \n        </a>\n        <a href=\"${buy_links[1].url}\" target=\"_blank\" rel=\"noreferrer noopener\" class=\"link shop-link\">\n       <img class=\"icon-shop\" src=\"./images/apple.png\" alt=\"${buy_links[1].name}\" /> \n        </a>\n        <a href=\"${buy_links[3].url}\" target=\"_blank\" rel=\"noreferrer noopener\" class=\"link shop-link\">\n        <img class=\"icon-shop\" src=\"./images/bookshops.png\" alt=\"${buy_links[3].name}\"  /> \n        </a>\n        </ul>\n        </div>\n        \n        </div>\n  </li>`).join('')\n}\n\n                \n                \nconst clear = document.querySelectorAll('.js-clear')\nconsole.log(clear);\n\nfor (let i = 0; i < clear.length; i++) {\n     clear[i].addEventListener(\"click\", handlerClearBasket\n      \n     );\n }\n// clear.addEventListener('click', handlerClearBasket)\n\nfunction handlerClearBasket(evt) {\n       evt.preventDefault();\n   \n\n if (!evt.target.classList.contains('js-clear')) {\n        return;\n    }\n\n    const products = JSON.parse(localStorage.getItem(PRODUCT_LS_KEY)) ?? [];\n \n    const product = evt.target.closest('.js-product');\n  \n    const productId = product.dataset.id;\n\n    const fidx= products.findIndex(option => option._id === productId);\n\n    const currentProduct = products.find(({ _id }) => _id === productId);\n    \n    const idx = products.some(({ _id }) => _id === productId);\n\n    const deleted = products.splice(fidx, 1);\n\n    localStorage.setItem(PRODUCT_LS_KEY, JSON.stringify(products))\n    \n    window.location.href = './shopping-list.html';\n    \n     return createMarkup(products)\n\n    \n}\n"],"names":["$e5c62ffd1c5d842f$var$elements","container","document","querySelector","empty","$e5c62ffd1c5d842f$var$PRODUCT_LS_KEY","$e5c62ffd1c5d842f$var$products","JSON","parse","localStorage","getItem","$e5c62ffd1c5d842f$var$createMarkup","arr","map","_id","list_name","title","author","description","book_image","buy_links","url","name","join","length","innerHTML","insertAdjacentHTML","$e5c62ffd1c5d842f$var$clear","querySelectorAll","console","log","i","addEventListener","$e5c62ffd1c5d842f$var$handlerClearBasket","evt","preventDefault","target","classList","contains","ref","products1","productId","closest","dataset","id","fidx","findIndex","option","find","some","splice","setItem","stringify","window","location","href"],"version":3,"file":"shopping-list.5a7c36b2.js.map"}